{% extends 'layout.html' %}

{% block body %}
  <div class="main">
    <div class="index-page col-md-12 col-sm-12">
      <div class="wallet col-md-6 col-sm-6">
        <h3>Balance</h3> <br />
        <strong data-toggle="tooltip" title="Qtum availabe to spend.">Available:</strong> <span class="pull-right">{{ get_info.balance }}</span> <br />
        <strong data-toggle="tooltip" title="Unconfirmed Qtum">Pending:</strong> <span class="pull-right">{{ get_info.unconfirmed_balance }}</span> <br />
        <strong ata-toggle="tooltip" title="Staking Rewards available after 500 Blocks">Immature:</strong> <span class="pull-right">{{ get_info.immature_balance }}</span> <br />
        <strong ata-toggle="tooltip" title="Coins Locked from Staking a Block">Staked:</strong><span class="pull-right">{{ get_info.stake }}</span> <br />
        <div class="q-total"><hr /> <span data-toggle="tooltip" title="Combined total Qtum, including pending and staked" class="pull-left">Total</span> {{ get_info.balance + get_info.unconfirmed_balance + get_info.immature_balance + get_info.stake }} QTUM</div>
      </div>
      <div class="wallet-right col-md-6 col-sm-6">
        <h3>Information</h3> <br />
        <strong>Wallet Version:</strong> <span class="pull-right">{{ get_info.version[29:36] }}</span> <br />
        <strong>Current Block:</strong> <span class="pull-right">{{ get_block.blocks }}</span> <br />
        {% if stake_output.staking == false %}
          <strong>Staking:</strong> <span class="pull-right red-sm">{{ stake_output.staking }}</span> <br />
        {% else %}
          <strong>Staking:</strong> <span class="pull-right green-sm">{{ stake_output.staking }}</span> <br />
        {% endif %}
        <strong>Wallet Weight:</strong> <span class="pull-right">{{'%0.8f'| format(stake_output.weight|float / 100000000)}}</span> <br />
        <strong>Net Weight:</strong> <span class="pull-right">{{'%0.2f'| format(stake_output.netstakeweight|float / 100000000000000)}} M</span> <br />
        <strong>Last Stake Reward:</strong> <span class="pull-right">October 12 2017</span> <br />
        <strong>Approx TTS:</strong> <span class="pull-right">{{ stake_time }} Days</span> <br />
      </div>
    </div>
    <div class="transactions-index col-md-12">
        <h3>Recent Transactions</h3>
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-center col-sm-3">Date</th>
              <th class="text-center col-sm-1">Type</th>
              <th class="text-center col-sm-3">Transaction ID</th>
              <th class="text-center col-sm-2">Amount</th>
              <th class="text-center col-sm-1">Fee</th>
              <th class="text-center col-sm-2">Confirmations</th>
            </tr>
          </thead>
          <tbody>
            {% for tx in last_tx[-4:] %}
            <tr>
              <td align="left"><a href="https://explorer.qtum.org/tx/{{tx.txid}}" target="_blank">{{ date.strftime('%B %d %Y %I:%M%p %Z', date.localtime(tx.time)) }}</a></td>
              <td align="center">
                {% if tx.category == "receive" %}
                  <span class="glyphicon glyphicon-download green"></span>
                {% elif tx.category == "send" %}
                  <span class="glyphicon glyphicon-upload red"></span>
                {% else %}
                  <span class="glyphicon glyphicon-refresh blue"></span>
                {% endif %}
              </td>
              <td id="table_padding" align="center" class="text"><span>{{ tx.txid }}</span></td>
              <td id="table_padding" align="center">{{ tx.amount }}</td>
              {% if tx.fee == nil %}
                <td id="table_padding" align="center">0.0000</td>
              {% else %}
                <td id="table_padding" align="center">{{ tx.fee }}</td>
              {% endif %}
              <td id="table_padding" align="center">{{ tx.confirmations }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>
  </div>
{% endblock %}
